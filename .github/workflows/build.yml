name: Build and deploy
on:
  workflow_dispatch:

jobs:                                     
  build:
    runs-on: ubuntu-latest                
    
    steps:
    - name: "Checkout the code"
      uses: actions/checkout@v2

    - name: Setup .NET Core
      uses: actions/setup-dotnet@v1
      with:
        dotnet-version: ${{env.DOTNET_VERSION}}

    - name: Build and Test the App
      run: |
        dotnet restore ${{env.SRC_PATH}}
        dotnet build ${{env.SRC_PATH}} --configuration Release --no-restore    
        dotnet test ${{env.SRC_PATH}} --no-restore --verbosity normal
        dotnet publish ${{env.SRC_PATH}}/WebAppUI/ -o ${{env.SRC_PATH}}/WebAppUI/publish